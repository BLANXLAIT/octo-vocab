# Certificate and provisioning profile management
git_url(ENV["MATCH_GIT_URL"] || "https://github.com/BLANXLAIT/blanxlait-ci-shared")
git_branch(ENV["MATCH_GIT_BRANCH"] || "main")

storage_mode("git")
type("appstore") # Can be: appstore, adhoc, development, enterprise
app_identifier(["com.blanxlait.octo-vocab"])

# Certificate and provisioning profile names
# Let match handle the naming automatically
username("") # Your Apple ID - will use App Store Connect API instead

# App Store Connect API configuration
# Use environment variables instead of file path to avoid JSON parsing issues
api_key_id(ENV["APP_STORE_CONNECT_API_KEY_ID"]) if ENV["APP_STORE_CONNECT_API_KEY_ID"]
api_issuer_id(ENV["APP_STORE_CONNECT_ISSUER_ID"]) if ENV["APP_STORE_CONNECT_ISSUER_ID"]
api_key(ENV["APP_STORE_CONNECT_API_KEY_CONTENT"]) if ENV["APP_STORE_CONNECT_API_KEY_CONTENT"]

# Team configuration
team_id(ENV["FASTLANE_TEAM_ID"]) if ENV["FASTLANE_TEAM_ID"]
team_name(ENV["FASTLANE_TEAM_NAME"]) if ENV["FASTLANE_TEAM_NAME"]

# Use readonly mode by default to avoid creating new certificates
# Set MATCH_READONLY=false when you need to generate new certificates
readonly(ENV["MATCH_READONLY"] != "false")

# Force code signing identity
force_for_new_devices(true)